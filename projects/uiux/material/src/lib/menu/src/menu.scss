// TODO(kara): update vars for desktop when MD team responds
@import '../../core/style/button-common';
@import '../../core/style/menu-common';
@import '../../core/style/layout-common';
@import '../../core/style/a11y';

$sp-menu-vertical-padding: 8px !default;
$sp-menu-border-radius: 2px !default;
$sp-menu-submenu-indicator-size: 10px !default;

.sp-menu-panel {
  @include sp-menu-base(2);
  max-height: calc(100vh - #{$sp-menu-item-height});
  border-radius: $sp-menu-border-radius;
  outline: 0;

  @include cdk-high-contrast {
    outline: solid 1px;
  }
}

.sp-menu-content {
  padding-top: $sp-menu-vertical-padding;
  padding-bottom: $sp-menu-vertical-padding;
}

.sp-menu-item {
  @include mat-button-reset();
  @include sp-menu-item-base();
  position: relative;
}

.sp-menu-item-submenu-trigger {
  // Increase the side padding to prevent the indicator from overlapping the text.
  padding-right: $sp-menu-side-padding * 2;

  // Renders a triangle to indicate that the menu item will open a sub-menu.
  &::after {
    $size: $sp-menu-submenu-indicator-size / 2;

    width: 0;
    height: 0;
    border-style: solid;
    border-width: $size 0 $size $size;
    border-color: transparent transparent transparent currentColor;
    content: '';
    display: inline-block;
    position: absolute;
    top: 50%;
    right: $sp-menu-side-padding;
    transform: translateY(-50%);
  }

  [dir='rtl'] & {
    padding-right: $sp-menu-side-padding;
    padding-left: $sp-menu-side-padding * 2;

    &::after {
      right: auto;
      left: $sp-menu-side-padding;
      transform: rotateY(180deg) translateY(-50%);
    }
  }

  // Prevent the user from interacting while the panel is still animating.
  // This avoids issues where the user could accidentally open a sub-menu,
  // because of the `overlapTrigger` option.
  .sp-menu-panel.ng-animating & {
    pointer-events: none;
  }
}

button.sp-menu-item {
  width: 100%;
}

.sp-menu-ripple {
  @include mat-fill;

  // Prevent any pointer events on the ripple container for a menu item. The ripple container is
  // not the trigger element for the ripples and can be therefore disabled like that. Disabling
  // the pointer events ensures that there is no `click` event that can bubble up and cause
  // the menu panel to close.
  pointer-events: none;
}
